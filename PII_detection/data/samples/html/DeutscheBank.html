<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Deutsche Bank Account Statement</title>
	<!-- Load Tailwind CSS -->
	<script src="https://cdn.tailwindcss.com"></script>
	<style>
		/* Custom styles to mimic the paper structure and typography */
		body {
			background-color: #f0f0f0; /* Light gray background for contrast */
			display: flex;
			justify-content: center;
			padding: 20px 0;
			line-height: 1.3; /* Tighter line height for document text */
		}
		/* Define a paper size container (A4-like width) */
		.statement-container {
			width: 100%;
			max-width: 800px;
			background-color: white;
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
			padding: 50px 70px; /* Generous internal padding */
		}
		/* Using a system serif font to match the formal document feel (Times New Roman style) */
		.font-document {
			font-family: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
		}
		/* Custom logo using CSS/Div to avoid external images */
		.db-logo {
			width: 25px;
			height: 25px;
			background-color: black;
			position: relative;
		}
		/* The logo's open corner */
		.db-logo::after {
			content: '';
			position: absolute;
			top: 2px;
			right: 2px;
			width: 30px;
			height: 30px;
			background-color: white;
			transform: rotate(45deg);
			transform-origin: top right;
		}
		/* Tight line height for transaction details */
		.transaction-text {
			line-height: 1.15;
			font-size: 9pt;
		}
	</style>
</head>
<body class="font-document text-gray-900 text-[10.5pt]">

	<div class="statement-container rounded-md">

		<!-- 1. HEADER (LOGO & BANK NAME) -->
		<header class="flex justify-between items-start mb-12">
			<div class="flex-grow">
				<!-- Empty space for left alignment -->
			</div>
			<div class="flex items-center space-x-2">
				<h1 class="text-2xl font-normal leading-none tracking-tight">Deutsche Bank</h1>
				<!-- Deutsche Bank logo -->
				<div class="db-logo ml-1"></div>
			</div>
		</header>

		<!-- 2. ADDRESS BLOCKS -->
		<div class="flex justify-between mb-6 text-xs leading-5">
			<!-- Left: Recipient Address -->
			<div class="w-1/2">
				<p class="font-normal mt-6">Mr.</p>
				<p class="font-normal">{{ person._name }}</p>
				<p class="font-normal">{{ person._address.replace('\n', '<br>') | safe }}</p>
			</div>
			
			<!-- Right: Sender/Contact Information -->
			<div class="w-3/2 text-[9pt] leading-4 text-left">
				<p class="mb-4 font-bold">Deutsche Bank Privat- und Geschäftskunden AG</p>
				
				<div class="text-[9pt] leading-4 mb-4">
					<p>Quartier</p>
					<p>Zukunft</p>
					<p>Friedrichstraße 181</p>
					<p>10117 Berlin</p>
				</div>

				<div class="mt-4  mb-10">
					<p>Bedienungsteam</p>
					<p>Telephone (030) 460611-0</p>
					<p>24-hour Customer Service (069) 910-10000</p>
				</div>

				<!-- 3. DATE -->
				<p class="text-left text-[11pt]">{{ statement._issue_date }}</p>

			</div>
		</div>
		
		<!-- 4. STATEMENT TITLE BLOCK -->
		<div class="mb-6">
			<h2 class="text-[12pt] font-bold leading-tight">
				Account statement from {{ transactions[0]["date"] }} to {{ statement._last_statement_date }}
			</h2>
			<p class="text-[12pt] font-bold">
				Account holder: {{ person._name }}
			</p>
		</div>

		<!-- 5. IBAN/BALANCE HEADER BLOCK (FIXED) -->
		<div class="border-y border-black text-[9pt] py-1 mb-4">
			<!-- Labels Row -->
			<div class="grid grid-cols-12 font-bold mb-1">
				<div class="col-span-1">Statement</div>
				<div class="col-span-1">Page</div>
				<div class="col-span-4">IBAN</div>
				<div class="col-span-2">BIC (SWIFT)</div>
				<!-- Alignment for Previous Balance (spans 4 columns) -->
				<div class="col-span-4 text-right">Previous balance as at {{ transactions[0]["date"] }}</div>
			</div>
			<!-- Values Row -->
			<div class="grid grid-cols-12 font-normal">
				<div class="col-span-1">5</div>
				<div class="col-span-1">1/7</div>
				<div class="col-span-4">{{ iban }}</div>
				<div class="col-span-2">{{ bic }}</div>
				<!-- Balance Value Column (aligns with the label above) -->
				<div class="col-span-2 text-left">EUR</div>
				<div class="col-span-2 text-right font-bold">+{{ statement._balance }}</div>
			</div>
		</div>

		<!-- 6. TRANSACTION TABLE -->
		<table class="w-full text-xs border-collapse">
			<thead>
				<tr class="text-[9pt] font-bold border-b border-black">
					<th class="w-[8%] text-left pb-1.5 font-bold">Booking date</th>
					<th class="w-[8%] text-left pb-1.5 font-bold">Value</th>
					<th class="w-[10%] text-left pb-1.5 font-bold">Item</th>
					<th class="w-[12%] text-right pb-1.5 font-bold">Debit</th>
					<th class="w-[13%] text-right pb-1.5 font-bold">Credit</th>
				</tr>
			</thead>
			<tbody>

				<!-- Row 3: Bill Payment (Nested 2) -->
				{% for t in transactions[1:] %}
				<tr class="border-b border-gray-300">
					<td class="pt-1.5 align-top font-normal">{{ t.date }}</td>
					<td class="pt-1.5 align-top font-normal">{{ t.date }}</td>
					<!-- <td class="pt-1.5 align-top font-normal"></td> -->
					<td class="pt-1.5 pb-2 align-top transaction-text font-normal">{{ t.merchant }}</td>
					{% if not t.credit %}
						<td class="pt-1.5 text-right align-top font-normal">-{{ t.debit }}</td>
						<td class="pt-1.5 text-right align-top font-normal"></td>
					{% else %}
						<td class="pt-1.5 text-right align-top font-normal"></td>
						<td class="pt-1.5 text-right align-top font-normal">+{{ t.credit }}</td>
					{% endif %}
				</tr>
				{% endfor %}
			</tbody>
		</table>

	</div>

</body>
</html>