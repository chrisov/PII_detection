<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HSBC Bank Statement Template</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 12px;
            color: #333;
            line-height: 1.4;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }

        .page {
            width: 800px;
            background: white;
            margin: 0 auto;
            padding: 40px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            min-height: 1000px;
            position: relative;
        }

        /* Header Section */
        .header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
        }

        .logo-section img {
            height: 35px;
        }

        .contact-info {
            text-align: right;
            font-size: 10px;
        }

        .contact-info b { font-size: 11px; }

        .statement-title {
            color: #db0011;
            font-size: 22px;
            margin-top: 10px;
            text-align: right;
        }

        /* Customer Info and Summary */
        .top-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 50px;
        }

        .customer-address {
            margin-top: 20px;
            font-size: 13px;
        }

        .summary-box {
            width: 320px;
            border-collapse: collapse;
        }

        .summary-box th {
            background-color: #f2f2f2;
            text-align: left;
            padding: 4px 8px;
            border-bottom: 1px solid #ddd;
        }

        .summary-box td {
            background-color: #f2f2f2;
            padding: 4px 8px;
            text-align: right;
            border-bottom: 1px solid #eee;
        }

        /* Account Details Header */
        .account-identifiers {
            display: flex;
            justify-content:flex-end;
			/* margin-right: 200px; */
            margin-bottom: 20px;
            font-size: 11px;
        }

        .bold-label { font-weight: bold; }

        /* Transactions Table */
        .transactions-title {
            border-bottom: 2px solid #333;
            font-size: 16px;
            font-weight: bold;
            padding-bottom: 5px;
            margin-bottom: 0;
        }

        .transaction-table {
            width: 100%;
            border-collapse: collapse;
        }

        .transaction-table thead th {
            font-style: italic;
            font-weight: bold;
            text-align: left;
            padding: 8px 0;
			background-color: #f2f2f2;
            border-bottom: 1px solid #ccc;
        }

        .transaction-table td {
            padding: 6px 0;
            vertical-align: top;
			text-align: left;
        }

        .col-date { width: 12%; }
        .col-details { width: 53%; }
        .col-out { width: 12%; text-align: right; }
        .col-in { width: 12%; text-align: right; }
        .col-bal { width: 11%; text-align: right; font-weight: bold; }

        .sub-detail {
            font-size: 10px;
            display: block;
            margin-left: 20px;
        }

        .footer-address {
            position: absolute;
            bottom: 40px;
            left: 40px;
            font-size: 11px;
            color: #666;
        }
    </style>
</head>
<body>

<div class="page">
    <div class="header">
        <div class="logo-section">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/HSBC_logo_%282018%29.svg/1280px-HSBC_logo_%282018%29.svg.png" alt="HSBC UK">
        </div>
        <div class="contact-info">
            Contact tel <b>03457 404 404</b><br>
            see reverse for call times<br>
            Text phone 03457 125 563<br>
            used by deaf or speech impaired customers<br>
            www.hsbc.co.uk
            <div class="statement-title">Your Statement</div>
        </div>
    </div>

    <div class="top-meta">
        <div class="customer-address">
            {{ "Mr " if person._gender == "Male" else "Mrs " if person._gender == "Female" }}{{ person._name }}<br>
            {{ person._address.replace('\n', '<br>') | safe }}
            <p style="margin-top: 30px;">|||'|'|''||'|''|''|||||''|||'|'</p>
        </div>
        
        <table class="summary-box">
            <thead>
                <tr><th colspan="2">Account Summary</th></tr>
            </thead>
            <tbody>
                <tr><td style="text-align: left;">Opening Balance</td><td>{{ statement._balance }}</td></tr>
                <tr><td style="text-align: left;">Payments In</td><td>{{ statement.calculate_total_credits() }}</td></tr>
                <tr><td style="text-align: left;">Payments Out</td><td>{{ statement.calculate_total_debits() }}</td></tr>
                <tr><td style="text-align: left;">Closing Balance</td><td><b>{{ statement._history[-1]['balance'] }}</b></td></tr>
            </tbody>
        </table>
    </div>

    <div style="margin-bottom: 30px;">
        <div style="font-weight: bold; margin-bottom: 20px;">{{ transactions[0]["date"] }} to {{ statement._last_statement_date }}</div>
        
        <div class="account-identifiers" style="margin-right: 130px">
            <div>
                <span class="bold-label">International Bank Account Number</span><br>
                {{ iban }}<br>
                <span class="bold-label">Branch Identifier Code</span><br>
                JUBKGB12345F
            </div>
        </div>

        <div class="account-identifiers">
            <div style="width: 60%;">
                <span class="bold-label">Account Name</span><br>
                {{ "Mr " if person._gender == "Male" else "Mrs " if person._gender == "Female" }}{{ person._name }}
            </div>
            <div style="width: 40%; display: flex; justify-content: space-between;">
                <div><span class="bold-label">Sortcode</span><br>40-25-02</div>
                <div><span class="bold-label">Account Number</span><br>{{ iban[-10:] }}</div>
                <div><span class="bold-label">Sheet Number</span><br>16</div>
            </div>
        </div>
    </div>

    <div class="transactions-title"></div>
    <table class="transaction-table">
        <thead>
            <tr>
                <th class="col-date">Date</th>
                <th class="col-details">Payment type and details</th>
                <th class="col-out">Paid out</th>
                <th class="col-in">Paid in</th>
                <th class="col-bal">Balance</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="col-date"><b>{{ transactions[0].date }}</b></td>
                <td class="col-details"><b>BALANCE BROUGHT FORWARD</b></td>
                <td class="col-out"></td>
                <td class="col-in"></td>
                <td class="col-bal">{{ statement._balance }}</td>
            </tr>
			{% for t in transactions[1:] %}
            <tr>
                <td class="col-date">{{ t.date }}</td>
                <td class="col-details">{{ t.merchant }}</td>
                {% if not t.debit %}
                    <td class="col-out"></td>
                    <td class="col-in">{{ t.credit }}</td>
                {% else %}
                    <td class="col-out">{{ t.debit }}</td>
                    <td class="col-in"></td>
                {% endif %}
                <td class="col-bal">{{ t.balance }}</td>
            </tr>
			{% endfor %}
        </tbody>
    </table>

    <div class="footer-address">
        127 High Street Hounslow Middlesex TW3 1QP
    </div>
</div>

</body>
</html>	